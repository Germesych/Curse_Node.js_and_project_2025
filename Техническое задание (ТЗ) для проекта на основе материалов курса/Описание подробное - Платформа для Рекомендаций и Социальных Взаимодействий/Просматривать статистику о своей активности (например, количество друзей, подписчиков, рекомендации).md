### 6. **Просматривать статистику о своей активности (например, количество друзей, подписчиков, рекомендации)**

Просмотр статистики активности пользователя — это важный аспект социального приложения, позволяющий пользователю отслеживать свою активность на платформе. Статистика включает информацию о количестве друзей, подписчиков, лайках, комментариях, а также персонализированные рекомендации.

#### 6.1. **Основные метрики для отображения**

1. **Количество друзей**:
   - Каждый пользователь может иметь список друзей. Это число важно для отображения на профиле и для предоставления пользователю информации о количестве его активных связей на платформе.
  
2. **Количество подписчиков и подписок**:
   - Пользователи могут подписываться на других пользователей. Эти данные показывают, сколько людей следит за пользователем (подписчики), а также на кого сам пользователь подписан.
  
3. **История взаимодействий**:
   - Важно предоставлять информацию о том, какие посты или контент пользователи лайкали, комментировали или оценивали. Эта статистика может помочь пользователю лучше понять свои интересы и активность на платформе.

4. **Рекомендации контента и пользователей**:
   - На основе активности пользователя (например, лайков, подписок, комментариев) система может генерировать рекомендации — как для контента, так и для других пользователей.

#### 6.2. **Шаги реализации**

1. **Создание моделей для статистики**

   Для каждого из элементов статистики (друзья, подписчики, лайки, комментарии и т.д.) можно создать отдельные модели. Например:

   - **Модель Friend (для друзей)**:
     - `user_id`: идентификатор пользователя, с которым установлена связь.
     - `friend_id`: идентификатор друга.
     - `status`: статус дружбы (например, "дружба", "запрос в ожидании", "удалена").
     - `timestamp`: время, когда была установлена или изменена связь.

   - **Модель Follower (для подписок и подписчиков)**:
     - `user_id`: идентификатор пользователя, на которого подписались.
     - `follower_id`: идентификатор подписчика.
     - `timestamp`: время подписки.

   - **Модели для лайков и комментариев** (например, `Like`, `Comment`):
     - Хранятся данные о взаимодействиях пользователя с контентом.

2. **Создание API для получения статистики**

   Чтобы пользователи могли просматривать свою активность, нужно создать API-методы для получения статистики. Пример запросов:

   - **GET /user/{user_id}/friends** — возвращает список друзей пользователя с количеством.
   - **GET /user/{user_id}/followers** — возвращает количество подписчиков.
   - **GET /user/{user_id}/subscriptions** — возвращает количество подписок.
   - **GET /user/{user_id}/interactions** — возвращает историю взаимодействий (например, лайкнутые посты).
   - **GET /user/{user_id}/recommendations** — генерирует и возвращает рекомендации для пользователя на основе его активности.

   API-методы должны быть защищены аутентификацией и авторизацией, чтобы каждый пользователь мог просматривать только свою статистику.

3. **Обработка и хранение данных**

   Для эффективного получения статистики и рекомендаций стоит учитывать производительность. Например:

   - **Индексация**:
     - Создание индексов на полях, которые часто используются для фильтрации или сортировки (например, `user_id`, `friend_id`, `follower_id`, `timestamp`), для ускорения запросов.
  
   - **Кэширование**:
     - Для уменьшения нагрузки на базу данных можно использовать кэширование. Например, данные о числе подписчиков или друзьях можно кэшировать в Redis, чтобы уменьшить количество запросов к базе данных.

4. **Агрегированные данные**

   Для улучшения производительности можно создать отдельные агрегированные поля в базе данных, которые будут хранить статистику в виде:
   - Общее количество друзей, подписчиков и подписок.
   - Последние взаимодействия пользователя (например, последние 5 лайков).

   Эти агрегированные данные можно обновлять через асинхронные процессы, которые будут периодически пересчитывать статистику на основе действий пользователя.

#### 6.3. **Дизайн интерфейса**

На фронтенде пользователи должны иметь возможность просматривать статистику с понятным интерфейсом. Включить следующие элементы:

1. **Профиль пользователя**:
   - Отображение количества друзей, подписчиков и подписок в виде иконок или цифр.
   - История взаимодействий с контентом, например, лайки и комментарии.
   - Секция с рекомендациями, которая может включать как рекомендации контента, так и пользователей для подписки.

2. **Персонализированные рекомендации**:
   - На основе поведения пользователя (что он лайкнул, на кого подписан) можно генерировать рекомендации. Это может быть сделано с использованием простых алгоритмов (например, фильтрация на основе интересов).

#### 6.4. **Реализация рекомендаций**

1. **Рекомендации пользователей**:
   - Можно использовать информацию о друзьях пользователя, а также на основе общих интересов или поведения генерировать рекомендации для новых людей, на которых можно подписаться.
   - Пример алгоритма: если пользователь лайкает или комментирует контент определенной категории (например, спорт), можно предложить ему подписаться на других пользователей, которые часто публикуют такой контент.

2. **Рекомендации контента**:
   - Рекомендации контента могут быть основаны на активности пользователя. Если он часто комментирует посты о музыке, то система может предложить ему новые музыкальные посты или рекомендации от пользователей с похожими интересами.
  
#### 6.5. **Обновление статистики и уведомления**

- Когда статистика обновляется (например, пользователь становится другом другого пользователя или получает нового подписчика), система должна отправить уведомление пользователю о нововведениях.
  
#### 6.6. **Ожидаемые результаты**

- Пользователи смогут видеть:
  - Количество своих друзей, подписчиков и подписок.
  - Историю взаимодействий с контентом.
  - Персонализированные рекомендации пользователей и контента.
  
- Эти данные должны быть актуальными и легко доступными.

### Технические ресурсы:
- **Технологии**: Node.js, MongoDB, API для работы со статистикой, Redis для кэширования, WebSocket для уведомлений.
- **Основные концепции**: Статистика пользователя, кэширование, персонализированные рекомендации, индексация, асинхронные операции.

Этот этап позволит студентам научиться собирать и представлять статистику активности пользователей, а также интегрировать систему рекомендаций для повышения вовлеченности на платформе.
